import os
import pep8
import fnmatch

results = {}

for path, subdirs, files in os.walk('${source-download:location}'):
    for file in fnmatch.filter(files, '*.py'):
        results.append(os.path.join(path, file))

for file in results:
    arglist = ['-qq', file]
    pep8.process_options(arglist)
    pep8.input_file(file)
    results[file] = [pep8.get_error_statistics(), pep8.get_warning_statistics()]

print results
